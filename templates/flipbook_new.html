<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Samera Architecture - Creating timeless spaces that inspire and endure">
    <title>SAMERA | Architecture & Design Studio</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&family=Raleway:wght@200;300;400;500;600&display=swap" rel="stylesheet">

    <!-- StPageFlip Library for realistic page turning -->
    <script src="https://cdn.jsdelivr.net/npm/page-flip@2.0.7/dist/js/page-flip.browser.min.js"></script>

    <style>
        /* ===== CSS Variables ===== */
        :root {
            --color-bg: #1a1a1a;
            --color-bg-light: #2a2a2a;
            --color-page: #f8f5f0;
            --color-page-dark: #e8e4df;
            --color-text: #2a2a2a;
            --color-text-light: #666666;
            --color-accent: #8b7355;
            --color-accent-dark: #6d5a44;
            --color-gold: #c9a962;
            --font-display: 'Cormorant Garamond', 'Playfair Display', Georgia, serif;
            --font-body: 'Raleway', -apple-system, sans-serif;
        }

        /* ===== Reset ===== */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: var(--font-body);
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 50%, #0a0a0a 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            -webkit-font-smoothing: antialiased;
        }

        /* ===== Preloader ===== */
        .preloader {
            position: fixed;
            inset: 0;
            background: #0a0a0a;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .preloader.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .preloader-logo {
            font-family: var(--font-display);
            font-size: 3rem;
            color: #fff;
            letter-spacing: 0.5em;
            margin-bottom: 2rem;
        }

        .preloader-text {
            font-size: 0.8rem;
            color: var(--color-gold);
            letter-spacing: 0.3em;
            text-transform: uppercase;
        }

        .book-opening {
            width: 60px;
            height: 40px;
            margin-top: 2rem;
            position: relative;
        }

        .book-opening::before,
        .book-opening::after {
            content: '';
            position: absolute;
            width: 28px;
            height: 40px;
            background: var(--color-page);
            top: 0;
            border-radius: 2px;
        }

        .book-opening::before {
            left: 2px;
            transform-origin: right center;
            animation: flipLeft 1.5s ease-in-out infinite;
        }

        .book-opening::after {
            right: 2px;
            transform-origin: left center;
            animation: flipRight 1.5s ease-in-out infinite 0.75s;
        }

        @keyframes flipLeft {
            0%, 100% { transform: rotateY(0deg); }
            50% { transform: rotateY(-30deg); }
        }

        @keyframes flipRight {
            0%, 100% { transform: rotateY(0deg); }
            50% { transform: rotateY(30deg); }
        }

        /* ===== Header ===== */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7), transparent);
            pointer-events: auto;
        }

        .logo {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: #fff;
            letter-spacing: 0.4em;
            text-decoration: none;
        }

        .logo span {
            display: block;
            font-size: 0.55rem;
            letter-spacing: 0.3em;
            color: var(--color-gold);
            margin-top: 2px;
        }

        .nav-controls {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .page-indicator {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.7);
            letter-spacing: 0.2em;
        }

        .fullscreen-btn {
            background: none;
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            padding: 0.5rem 1rem;
            font-size: 0.7rem;
            letter-spacing: 0.15em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .fullscreen-btn:hover {
            background: rgba(255,255,255,0.1);
            border-color: var(--color-gold);
        }

        /* ===== Flipbook Container ===== */
        .flipbook-viewport {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            margin: 0;
        }

        .flipbook-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #flipbook {
            box-shadow:
                0 0 80px rgba(0,0,0,0.4),
                0 30px 60px rgba(0,0,0,0.3);
        }

        /* Fix duplicate flip animation - ensure only the library handles flipping */
        .stf__parent {
            position: relative !important;
        }

        .stf__wrapper {
            perspective: 2000px !important;
        }

        /* Ensure pages don't create duplicate animations */
        #flipbook .page {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }

        /* CRITICAL: Hide the original page elements after library takes over */
        #flipbook > .page {
            display: none !important;
        }

        /* Only show pages rendered by the library */
        .stf__item {
            display: block !important;
        }

        /* Prevent any ghost/duplicate renders */
        .stf__block {
            overflow: hidden;
        }

        /* ===== Page Styles ===== */
        .page {
            background: linear-gradient(135deg, #faf8f5 0%, #f5f0e8 100%);
            overflow: hidden;
            position: relative;
        }

        .page-content {
            width: 100%;
            height: 100%;
            padding: 60px;
            display: flex;
            flex-direction: column;
            position: relative;
            box-sizing: border-box;
        }

        /* Paper texture */
        .page::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 1;
        }

        /* Page number */
        .page-number {
            position: absolute;
            bottom: 25px;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            color: var(--color-text-light);
            z-index: 2;
        }

        .page:nth-child(odd) .page-number {
            right: 30px;
        }

        .page:nth-child(even) .page-number {
            left: 30px;
        }

        /* ===== Cover Page ===== */
        .cover {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%) !important;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .cover::after {
            content: '';
            position: absolute;
            inset: 15px;
            border: 1px solid var(--color-gold);
            opacity: 0.3;
            pointer-events: none;
        }

        .cover-content {
            text-align: center;
            color: #fff;
            z-index: 1;
        }

        .cover-subtitle {
            font-size: 0.65rem;
            letter-spacing: 0.5em;
            color: var(--color-gold);
            margin-bottom: 2rem;
        }

        .cover-title {
            font-family: var(--font-display);
            font-size: 4.5rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            margin-bottom: 1rem;
        }

        .cover-line {
            width: 80px;
            height: 1px;
            background: var(--color-gold);
            margin: 2rem auto;
        }

        .cover-tagline {
            font-family: var(--font-display);
            font-size: 1.1rem;
            font-style: italic;
            color: rgba(255,255,255,0.7);
        }

        .cover-year {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            letter-spacing: 0.3em;
            color: rgba(255,255,255,0.4);
        }

        /* ===== Index / Table of Contents Page ===== */
        .index-page .page-content {
            padding: 40px 50px;
        }

        .index-title {
            font-family: var(--font-display);
            font-size: 2.8rem;
            font-weight: 300;
            color: var(--color-text);
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .decorative-line {
            width: 50px;
            height: 1px;
            background: var(--color-accent);
            margin: 1rem 0 1.5rem;
        }

        .index-nav {
            flex: 1;
            overflow: hidden;
        }

        .index-section {
            margin-bottom: 1.5rem;
        }

        .index-section-title {
            font-size: 0.6rem;
            font-weight: 500;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--color-accent);
            margin-bottom: 0.75rem;
            padding-bottom: 0.4rem;
            border-bottom: 1px solid rgba(0,0,0,0.08);
        }

        .index-list {
            list-style: none;
        }

        .index-item {
            display: flex;
            align-items: baseline;
            padding: 0.6rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .index-item:hover {
            padding-left: 8px;
        }

        .index-item:hover .index-item-title {
            color: var(--color-accent);
        }

        .index-item-number {
            font-family: var(--font-display);
            font-size: 0.9rem;
            color: var(--color-accent);
            width: 30px;
            flex-shrink: 0;
        }

        .index-item-title {
            font-family: var(--font-display);
            font-size: 1.25rem;
            color: var(--color-text);
            transition: color 0.3s ease;
        }

        .index-item-dots {
            flex: 1;
            margin: 0 10px;
            border-bottom: 1px dotted rgba(0,0,0,0.15);
            min-width: 20px;
            margin-bottom: 5px;
        }

        .index-item-page {
            font-family: var(--font-display);
            font-size: 1rem;
            color: var(--color-text-light);
        }

        /* ===== Section Title Pages ===== */
        .section-title-page {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-dark) 100%) !important;
        }

        .section-title-page .page-content {
            align-items: center;
            justify-content: center;
            color: #fff;
        }

        .section-number {
            font-family: var(--font-display);
            font-size: 10rem;
            font-weight: 300;
            opacity: 0.12;
            position: absolute;
            top: 20px;
            right: 30px;
        }

        .section-title {
            font-family: var(--font-display);
            font-size: 3.5rem;
            font-weight: 300;
            letter-spacing: 0.15em;
            text-transform: uppercase;
        }

        .section-subtitle {
            font-size: 0.7rem;
            letter-spacing: 0.3em;
            margin-top: 0.75rem;
            opacity: 0.7;
        }

        /* ===== Project Pages ===== */
        .project-image-page .page-content {
            padding: 0;
        }

        .project-image-page img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .project-info-page .page-content {
            justify-content: center;
            padding: 50px;
        }

        .project-category {
            font-size: 0.6rem;
            letter-spacing: 0.35em;
            text-transform: uppercase;
            color: var(--color-accent);
            margin-bottom: 1rem;
        }

        .project-title {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 400;
            color: var(--color-text);
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        .project-description {
            font-size: 0.9rem;
            line-height: 1.8;
            color: var(--color-text-light);
            margin-bottom: 2rem;
        }

        .project-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(0,0,0,0.08);
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .detail-label {
            font-size: 0.55rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--color-text-light);
        }

        .detail-value {
            font-family: var(--font-display);
            font-size: 1rem;
            color: var(--color-text);
        }

        /* ===== About Pages ===== */
        .about-image-page .page-content {
            padding: 30px;
        }

        .about-image-page img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .about-page .page-content {
            padding: 50px;
            justify-content: center;
        }

        .about-title {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 300;
            color: var(--color-text);
            margin-bottom: 1.5rem;
        }

        .about-title em {
            font-style: italic;
            color: var(--color-accent);
        }

        .about-text {
            font-size: 0.85rem;
            line-height: 1.9;
            color: var(--color-text-light);
            margin-bottom: 1rem;
        }

        .about-stats {
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(0,0,0,0.08);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-family: var(--font-display);
            font-size: 2rem;
            color: var(--color-accent);
        }

        .stat-label {
            font-size: 0.6rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--color-text-light);
            margin-top: 0.3rem;
        }

        /* ===== Services Page ===== */
        .services-page .page-content {
            padding: 45px;
        }

        .services-title {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 300;
            margin-bottom: 2rem;
            color: var(--color-text);
        }

        .service-item {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .service-number {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--color-accent);
            opacity: 0.5;
            line-height: 1;
        }

        .service-content h3 {
            font-family: var(--font-display);
            font-size: 1.1rem;
            font-weight: 400;
            margin-bottom: 0.3rem;
            color: var(--color-text);
        }

        .service-content p {
            font-size: 0.8rem;
            color: var(--color-text-light);
            line-height: 1.6;
        }

        /* ===== Contact Page ===== */
        .contact-page .page-content {
            padding: 50px;
            justify-content: center;
        }

        .contact-title {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 300;
            margin-bottom: 2rem;
            color: var(--color-text);
        }

        .contact-item {
            margin-bottom: 1.5rem;
        }

        .contact-label {
            font-size: 0.55rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--color-text-light);
            margin-bottom: 0.3rem;
        }

        .contact-value {
            font-family: var(--font-display);
            font-size: 1.1rem;
            color: var(--color-text);
        }

        .contact-value a {
            color: inherit;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .contact-value a:hover {
            color: var(--color-accent);
        }

        .social-links {
            display: flex;
            gap: 0.75rem;
            margin-top: 2rem;
        }

        .social-link {
            width: 36px;
            height: 36px;
            border: 1px solid rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-text);
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: var(--color-accent);
            border-color: var(--color-accent);
            color: #fff;
        }

        .social-link svg {
            width: 16px;
            height: 16px;
        }

        /* ===== Back Cover ===== */
        .back-cover {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%) !important;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-cover-content {
            text-align: center;
            color: #fff;
        }

        .back-cover-logo {
            font-family: var(--font-display);
            font-size: 1.8rem;
            letter-spacing: 0.4em;
            margin-bottom: 0.75rem;
        }

        .back-cover-text {
            font-size: 0.7rem;
            letter-spacing: 0.2em;
            color: rgba(255,255,255,0.4);
        }

        /* ===== Navigation Arrows ===== */
        .nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .nav-arrow:hover {
            background: rgba(255,255,255,0.15);
            border-color: var(--color-gold);
            transform: translateY(-50%) scale(1.1);
        }

        .nav-arrow:active {
            transform: translateY(-50%) scale(0.95);
        }

        .nav-arrow.prev {
            left: 15px;
        }

        .nav-arrow.next {
            right: 15px;
        }

        .nav-arrow svg {
            width: 20px;
            height: 20px;
        }

        /* ===== Thumbnail Navigation ===== */
        .thumbnail-nav {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 5px;
            padding: 10px 18px;
            background: rgba(0,0,0,0.9);
            border-radius: 25px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .thumb-dot {
            width: 8px;
            height: 8px;
            background: rgba(255,255,255,0.25);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .thumb-dot:hover {
            background: rgba(255,255,255,0.5);
            transform: scale(1.2);
        }

        .thumb-dot.active {
            background: var(--color-gold);
            transform: scale(1.3);
        }

        /* ===== Responsive ===== */
        @media (max-width: 1200px) {
            .cover-title { font-size: 3.5rem; }
            .project-title { font-size: 2rem; }
            .section-title { font-size: 2.8rem; }
            .section-number { font-size: 7rem; }
        }

        @media (max-width: 900px) {
            .header { padding: 1rem 1.5rem; }
            .nav-arrow { width: 45px; height: 45px; }
            .nav-arrow.prev { left: 10px; }
            .nav-arrow.next { right: 10px; }
            .cover-title { font-size: 2.5rem; }
            .page-content { padding: 35px; }
            .project-title { font-size: 1.6rem; }
            .section-title { font-size: 2rem; }
            .section-number { font-size: 5rem; }
            .index-title { font-size: 2rem; }
            .index-item-title { font-size: 1rem; }
        }

        /* ===== Hint Animation ===== */
        .flip-hint {
            position: fixed;
            bottom: 80px;
            right: 50px;
            color: rgba(255,255,255,0.6);
            font-size: 0.7rem;
            letter-spacing: 0.15em;
            display: flex;
            align-items: center;
            gap: 8px;
            animation: hintPulse 2s ease-in-out infinite;
            pointer-events: none;
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        .flip-hint.hidden {
            opacity: 0;
        }

        .flip-hint svg {
            width: 20px;
            height: 20px;
            animation: hintArrow 1s ease-in-out infinite;
        }

        @keyframes hintPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        @keyframes hintArrow {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <!-- Preloader -->
    <div class="preloader" id="preloader">
        <div class="preloader-logo">SAMERA</div>
        <div class="preloader-text">Opening Portfolio</div>
        <div class="book-opening"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <a href="#" class="logo">
            SAMERA
            <span>ARCHITECTURE</span>
        </a>
        <div class="nav-controls">
            <span class="page-indicator">
                Page <span id="current-page">1</span> of <span id="total-pages">--</span>
            </span>
            <button class="fullscreen-btn" onclick="toggleFullscreen()">FULLSCREEN</button>
        </div>
    </header>

    <!-- Navigation Arrows -->
    <button class="nav-arrow prev" id="prev-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M15 19l-7-7 7-7"/>
        </svg>
    </button>
    <button class="nav-arrow next" id="next-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M9 5l7 7-7 7"/>
        </svg>
    </button>

    <!-- Flip Hint -->
    <div class="flip-hint" id="flip-hint">
        <span>Drag or click to flip</span>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M9 5l7 7-7 7"/>
        </svg>
    </div>

    <!-- Flipbook Container -->
    <div class="flipbook-viewport">
        <div class="flipbook-container">
            <div id="flipbook">

                <!-- Page 1: Front Cover -->
                <div class="page cover">
                    <div class="cover-content">
                        <div class="cover-subtitle">ARCHITECTURE & DESIGN</div>
                        <h1 class="cover-title">SAMERA</h1>
                        <div class="cover-line"></div>
                        <p class="cover-tagline">Creating Timeless Spaces That Inspire</p>
                    </div>
                    <div class="cover-year">PORTFOLIO 2026</div>
                </div>

                <!-- Page 2: Table of Contents -->
                <div class="page index-page">
                    <div class="page-content">
                        <h2 class="index-title">Contents</h2>
                        <div class="decorative-line"></div>

                        <nav class="index-nav">
                            <div class="index-section">
                                <h3 class="index-section-title">Projects</h3>
                                <ul class="index-list">
                                    {% for project in projects %}
                                    <li class="index-item" data-page="{{ loop.index * 2 + 2 }}">
                                        <span class="index-item-number">{{ '%02d' % loop.index }}</span>
                                        <span class="index-item-title">{{ project.title }}</span>
                                        <span class="index-item-dots"></span>
                                        <span class="index-item-page">{{ '%02d' % (loop.index * 2 + 2) }}</span>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>

                            <div class="index-section">
                                <h3 class="index-section-title">Studio</h3>
                                <ul class="index-list">
                                    <li class="index-item" data-page="{{ projects|length * 2 + 4 }}">
                                        <span class="index-item-number">—</span>
                                        <span class="index-item-title">About Us</span>
                                        <span class="index-item-dots"></span>
                                        <span class="index-item-page">{{ '%02d' % (projects|length * 2 + 4) }}</span>
                                    </li>
                                    <li class="index-item" data-page="{{ projects|length * 2 + 6 }}">
                                        <span class="index-item-number">—</span>
                                        <span class="index-item-title">Services</span>
                                        <span class="index-item-dots"></span>
                                        <span class="index-item-page">{{ '%02d' % (projects|length * 2 + 6) }}</span>
                                    </li>
                                    <li class="index-item" data-page="{{ projects|length * 2 + 7 }}">
                                        <span class="index-item-number">—</span>
                                        <span class="index-item-title">Contact</span>
                                        <span class="index-item-dots"></span>
                                        <span class="index-item-page">{{ '%02d' % (projects|length * 2 + 7) }}</span>
                                    </li>
                                </ul>
                            </div>
                        </nav>

                        <span class="page-number">01</span>
                    </div>
                </div>

                <!-- Page 3: Projects Section Title -->
                <div class="page section-title-page">
                    <div class="page-content">
                        <span class="section-number">01</span>
                        <h2 class="section-title">Projects</h2>
                        <p class="section-subtitle">Selected Works 2022 — 2026</p>
                    </div>
                </div>

                <!-- Project Pages -->
                {% for project in projects %}
                <!-- Project {{ loop.index }}: Image -->
                <div class="page project-image-page">
                    <div class="page-content">
                        <img src="{{ project.image }}" alt="{{ project.title }}" loading="lazy">
                    </div>
                </div>

                <!-- Project {{ loop.index }}: Info -->
                <div class="page project-info-page">
                    <div class="page-content">
                        <span class="project-category">{{ project.category }}</span>
                        <h3 class="project-title">{{ project.title }}</h3>
                        <p class="project-description">{{ project.description }}</p>
                        <div class="project-details">
                            <div class="detail-item">
                                <span class="detail-label">Location</span>
                                <span class="detail-value">{{ project.location }}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Year</span>
                                <span class="detail-value">{{ project.year }}</span>
                            </div>
                        </div>
                        <span class="page-number">{{ '%02d' % (loop.index * 2 + 2) }}</span>
                    </div>
                </div>
                {% endfor %}

                <!-- About Section Title -->
                <div class="page section-title-page">
                    <div class="page-content">
                        <span class="section-number">02</span>
                        <h2 class="section-title">About</h2>
                        <p class="section-subtitle">Our Story & Philosophy</p>
                    </div>
                </div>

                <!-- About Image -->
                <div class="page about-image-page">
                    <div class="page-content">
                        <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800" alt="Studio" loading="lazy">
                    </div>
                </div>

                <!-- About Content -->
                <div class="page about-page">
                    <div class="page-content">
                        <h2 class="about-title">Crafting Spaces <em>Since 2010</em></h2>
                        <p class="about-text">
                            SAMERA Architecture is an award-winning studio dedicated to creating exceptional spaces that transcend the ordinary.
                        </p>
                        <p class="about-text">
                            Our multidisciplinary team combines innovative design thinking with technical expertise. We believe architecture should tell a story.
                        </p>
                        <div class="about-stats">
                            <div class="stat-item">
                                <span class="stat-number">150+</span>
                                <span class="stat-label">Projects</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">15</span>
                                <span class="stat-label">Years</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">25</span>
                                <span class="stat-label">Awards</span>
                            </div>
                        </div>
                        <span class="page-number">{{ '%02d' % (projects|length * 2 + 5) }}</span>
                    </div>
                </div>

                <!-- Services Page -->
                <div class="page services-page">
                    <div class="page-content">
                        <h2 class="services-title">Our Services</h2>
                        <div class="service-item">
                            <span class="service-number">01</span>
                            <div class="service-content">
                                <h3>Architecture</h3>
                                <p>From concept to completion, we design buildings that inspire and endure.</p>
                            </div>
                        </div>
                        <div class="service-item">
                            <span class="service-number">02</span>
                            <div class="service-content">
                                <h3>Interior Design</h3>
                                <p>Creating harmonious interior spaces that reflect your vision.</p>
                            </div>
                        </div>
                        <div class="service-item">
                            <span class="service-number">03</span>
                            <div class="service-content">
                                <h3>Urban Planning</h3>
                                <p>Thoughtful urban design that creates vibrant communities.</p>
                            </div>
                        </div>
                        <div class="service-item">
                            <span class="service-number">04</span>
                            <div class="service-content">
                                <h3>Renovation</h3>
                                <p>Breathing new life into existing structures.</p>
                            </div>
                        </div>
                        <span class="page-number">{{ '%02d' % (projects|length * 2 + 6) }}</span>
                    </div>
                </div>

                <!-- Contact Page -->
                <div class="page contact-page">
                    <div class="page-content">
                        <h2 class="contact-title">Get in Touch</h2>
                        <div class="contact-item">
                            <div class="contact-label">Email</div>
                            <div class="contact-value">
                                <a href="mailto:hello@samera.com">hello@samera.com</a>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-label">Phone</div>
                            <div class="contact-value">
                                <a href="tel:+1234567890">+1 (234) 567-890</a>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-label">Address</div>
                            <div class="contact-value">
                                123 Architecture Lane<br>Los Angeles, CA 90012
                            </div>
                        </div>
                        <div class="social-links">
                            <a href="#" class="social-link">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="2" y="2" width="20" height="20" rx="5"/>
                                    <circle cx="12" cy="12" r="4"/>
                                </svg>
                            </a>
                            <a href="#" class="social-link">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="2" y="2" width="20" height="20" rx="3"/>
                                    <path d="M8 11v5M8 8v.01M12 16v-5c0-1 1-2 2-2s2 1 2 2v5"/>
                                </svg>
                            </a>
                            <a href="#" class="social-link">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/>
                                </svg>
                            </a>
                        </div>
                        <span class="page-number">{{ '%02d' % (projects|length * 2 + 7) }}</span>
                    </div>
                </div>

                <!-- Back Cover -->
                <div class="page back-cover">
                    <div class="back-cover-content">
                        <div class="back-cover-logo">SAMERA</div>
                        <div class="back-cover-text">www.samera.com</div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Thumbnail Navigation -->
    <div class="thumbnail-nav" id="thumbnail-nav"></div>

    <script>
        // Wait for page load
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('preloader').classList.add('hidden');
                initFlipbook();
            }, 1800);
        });

        let pageFlip;

        function initFlipbook() {
            const flipbookEl = document.getElementById('flipbook');

            // Calculate optimal size for FULL VIEWPORT BOOK SPREAD
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;

            let width, height;
            if (viewportWidth <= 768) {
                // Mobile: single page - use most of screen
                width = Math.min(viewportWidth - 20, viewportWidth * 0.95);
                height = Math.min(viewportHeight - 100, viewportHeight * 0.85);
            } else if (viewportWidth <= 1200) {
                // Tablet: large book
                width = Math.min((viewportWidth - 40) / 2, viewportWidth * 0.45);
                height = Math.min(viewportHeight - 100, viewportHeight * 0.88);
            } else {
                // Desktop: MASSIVE full viewport book - each page takes ~45% of viewport width
                width = Math.floor((viewportWidth - 40) / 2);  // Each page is nearly half the screen
                height = Math.floor(viewportHeight - 100);      // Almost full height
            }

            // Initialize PageFlip as an OPEN BOOK (double page spread)
            pageFlip = new St.PageFlip(flipbookEl, {
                width: width,           // Width of ONE page (book will be 2x this when open)
                height: height,         // Height of pages
                size: "stretch",
                minWidth: 300,
                maxWidth: 1200,         // Allow much larger pages
                minHeight: 400,
                maxHeight: 1200,        // Allow much taller pages

                // IMPORTANT: Show as open book with 2 pages
                showCover: true,        // First page is cover (single)
                usePortrait: false,     // FALSE = landscape/book mode with 2 pages

                // Realistic flip settings
                maxShadowOpacity: 0.5,  // Shadow darkness during flip
                drawShadow: true,       // Draw page shadow
                flippingTime: 1000,     // Slower flip animation for realism (ms)

                // Interaction
                useMouseEvents: true,
                clickEventForward: true,
                swipeDistance: 30,
                showPageCorners: true,  // Show corner hover effect
                disableFlipByClick: false,

                // Mobile
                mobileScrollSupport: false,

                startZIndex: 0,
                autoSize: true,
                startPage: 0
            });

            // Load pages
            const pages = document.querySelectorAll('#flipbook .page');
            pageFlip.loadFromHTML(document.querySelectorAll('#flipbook .page'));

            // Update total pages
            document.getElementById('total-pages').textContent = pageFlip.getPageCount();
            updatePageIndicator(0);
            generateThumbnails();

            // Event listeners
            pageFlip.on('flip', (e) => {
                updatePageIndicator(e.data);
                updateThumbnails(e.data);

                // Hide hint after first flip
                document.getElementById('flip-hint').classList.add('hidden');
            });

            pageFlip.on('changeState', (e) => {
                // Add sound effect when page starts flipping
                if (e.data === 'flipping') {
                    playPageSound();
                }
            });

            // Navigation buttons
            document.getElementById('prev-btn').addEventListener('click', () => {
                pageFlip.flipPrev();
            });

            document.getElementById('next-btn').addEventListener('click', () => {
                pageFlip.flipNext();
            });

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' || e.key === ' ') {
                    e.preventDefault();
                    pageFlip.flipNext();
                } else if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    pageFlip.flipPrev();
                } else if (e.key === 'Home') {
                    pageFlip.flip(0);
                } else if (e.key === 'End') {
                    pageFlip.flip(pageFlip.getPageCount() - 1);
                }
            });

            // Index item clicks
            document.querySelectorAll('.index-item').forEach(item => {
                item.addEventListener('click', () => {
                    const page = parseInt(item.dataset.page) - 1;
                    pageFlip.flip(page);
                });
            });

            // Resize handler
            window.addEventListener('resize', () => {
                const vw = window.innerWidth;
                const vh = window.innerHeight;
                let newWidth, newHeight;

                if (vw <= 768) {
                    newWidth = Math.min(vw - 20, vw * 0.95);
                    newHeight = Math.min(vh - 100, vh * 0.85);
                } else if (vw <= 1200) {
                    newWidth = Math.min((vw - 40) / 2, vw * 0.45);
                    newHeight = Math.min(vh - 100, vh * 0.88);
                } else {
                    newWidth = Math.floor((vw - 40) / 2);
                    newHeight = Math.floor(vh - 100);
                }

                pageFlip.updateFromHtml(document.querySelectorAll('#flipbook .page'));
            });

            // Hide hint after 5 seconds
            setTimeout(() => {
                document.getElementById('flip-hint').classList.add('hidden');
            }, 5000);
        }

        function updatePageIndicator(pageIndex) {
            document.getElementById('current-page').textContent = pageIndex + 1;
        }

        function generateThumbnails() {
            const nav = document.getElementById('thumbnail-nav');
            nav.innerHTML = '';
            const pageCount = pageFlip.getPageCount();

            for (let i = 0; i < pageCount; i++) {
                const dot = document.createElement('div');
                dot.className = 'thumb-dot' + (i === 0 ? ' active' : '');
                dot.addEventListener('click', () => pageFlip.flip(i));
                dot.title = 'Page ' + (i + 1);
                nav.appendChild(dot);
            }
        }

        function updateThumbnails(pageIndex) {
            const dots = document.querySelectorAll('.thumb-dot');
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === pageIndex);
            });
        }

        // Page flip sound effect using Web Audio API
        function playPageSound() {
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

                // Create noise for paper sound
                const bufferSize = audioCtx.sampleRate * 0.15;
                const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
                const data = buffer.getChannelData(0);

                for (let i = 0; i < bufferSize; i++) {
                    // White noise with envelope
                    const envelope = Math.sin(Math.PI * i / bufferSize);
                    data[i] = (Math.random() * 2 - 1) * envelope * 0.3;
                }

                const source = audioCtx.createBufferSource();
                source.buffer = buffer;

                // Low pass filter for paper-like sound
                const filter = audioCtx.createBiquadFilter();
                filter.type = 'lowpass';
                filter.frequency.value = 2000;

                // Gain control
                const gain = audioCtx.createGain();
                gain.gain.value = 0.15;

                source.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);

                source.start();
            } catch (e) {
                // Audio not supported or blocked
            }
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }
    </script>
</body>
</html>
